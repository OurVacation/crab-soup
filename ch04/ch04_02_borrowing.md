# 🦀 Chapter 04_02. 대여 (Borrowing) / 참조 (&)

> **작성자:** taewonki
> **학습 날짜:** 2026.2.13
> **주요 키워드:** #대여 #참조 #Borrowing #소유권

---

## 1. 🥘 핵심 재료 (Key Concepts)

소유권은 어디로든 모두 이동한다. for문 안으로도 이동하고, 함수 파라미터로 넘겨도 소유권이 함수 내부로 이동해버린다.

원본 데이터의 소유권은 유지하면서 값만 잠깐 읽거나 바꾸고 싶을때 방법은 없을까?

그것이 바로 대여와 참조이다.

### (1) 대여 (Borrowing) / 참조 (&)
- **정의:** 소유권이라는 특징 때문에, 특정 변수의 값을 소유권 이동 없이 빌려만 주는 것이다.
- **왜 쓰는가?**
1. Move 없이 데이터를 읽고 쓰기 위해
	함수에 변수를 그대로 넣으면 소유권이 해당 함수로 옮겨가게 된다. 해당 함수에서 값을 잠깐 읽거나 수정만 하고 싶을 때 잠시 소유권을 빌려 주기 위함이다.

### (2) 대여의 규칙
- **대여 검사기:** Rust의 참조에는 "대여 검사기"라는 컴파일러의 엄격한 관리자가 따라붙는다.
- **규칙:**
    1. **읽기 / 수정의 분리:** 데이터 경쟁(Data Race)을 방지한다.
		- 참조를 만들때 선택을 해야한다. 읽기 참조를 여러 개 만들것인지, 아니면 가변 참조를 하나 만들 것인지.
		- 읽기 참조와 가변참조를 동시에 생성하는 것은 불가능하다.
    2. **생명 주기:** 댕글링 참조(Dangling Reference)를 방지한다.
		- 이건 나중에 라이프타임 절에서 따로 다루겠다.

---

## 2. 🍳 조리 과정 (Code & Analysis)
> **책의 예제 코드를 그대로 치지 말고, 변형하거나 주석을 달아 분석합니다.**

---

## 3. 🧂 깊은 맛 (Deep Dive)

### C++ 참조와 Rust 참조의 차이

**1. C++의 참조**
- `int& ref = origin;` 하면 `ref`와 `origin`은 같은 메모리 주소를 가리키는 동등한 이름이 된다.
- **위험성:**
    - **Dangling Reference:** 참조가 가리키던 원본 데이터가 사라져도, 참조 자체는 남아있을 수도 있다. 이 값을 사용하면 런타임에 프로그램이 터진다.
    - **Data Race:** 같은 데이터를 가리키는 여러 참조에서 동시에 값을 수정하려 할 수 있다.

**2. Rust의 참조 ("대여")**
- C++의 참조(별칭) 보다는 소유권 규칙을 지키면서 데이터를 잠시 빌려오는 "대여"의 개념이다.
- 대여 검사기가 C++의 두 가지 위험성(Dangling Reference, Data Race)을 차단하게 된다.

---

## 4. 🔥 실패와 해결 (Troubleshooting)

---

## 5. 😋 시식평 (Tasting Note)
> **이번 챕터를 공부하며 느낀 점을 자유롭게 적습니다.**

- **난이도:** ⭐⭐⭐⭐☆
- **한줄평:** 대여라는 것이 생각해보면 Move라는 엄격한 규칙 아래 내부 데이터를 읽고 쓰기 위해 만들어진 방법이라 이것 또한 생소할 수 밖에 없다. 그러나 소유권을 잠시 빌려오는 것(대여)을 통해 Rust에서 추구하는 메모리 안정성을 유지함과 동시에 변수의 데이터에 접근하는 것이 가능해졌다.
(한줄이 아니게 되었다!)
